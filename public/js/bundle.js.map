{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://fix-anderson-12989-popup-map/./src/js/modules/PopupDelivery.js","webpack://fix-anderson-12989-popup-map/webpack/bootstrap","webpack://fix-anderson-12989-popup-map/webpack/runtime/make namespace object","webpack://fix-anderson-12989-popup-map/./src/js/main.js"],"sourcesContent":["const CafesMap = {\n\t_map: null,\n\n\t_options: {},\n\n\t_handleWindowResize() {\n\t\tthis.refresh();\n\t},\n\n\t_handleBallonApply(e) {\n\t\tconst cafeId = $(e.currentTarget).data(\"id\");\n\t\tPopupDelivery.App.pickCafeById(cafeId);\n\t\tthis._map.balloon.close(true);\n\t},\n\n\t_createMap() {\n\t\tconst baseOptions = $(\"#popup-delivery\").data(\"base-map-options\");\n\t\tconst cafeOptions = $(\"#popup-delivery\").data(\"cafes-map-options\");\n\t\tthis._options = Object.assign({}, baseOptions, cafeOptions);\n\n\t\tthis._map = new ymaps.Map(\"popup-delivery__cafes-map\", this._options);\n\t},\n\n\taddCafes(cafes) {\n\t\tcafes.forEach((cafe) => {\n\t\t\tconst balloonHtml = $(cafe.content)\n\t\t\t\t.append(\n\t\t\t\t\t`<button type=\"button\" class=\"c-button c-button__default popup-delivery__balloon__apply\" data-id=\"${cafe.id}\">\n\t\t\t\t\t\tВыбрать\n\t\t\t\t\t</button>`\n\t\t\t\t)\n\t\t\t\t.html();\n\n\t\t\tconst placemark = new ymaps.Placemark(\n\t\t\t\tcafe.location,\n\t\t\t\t{\n\t\t\t\t\tballoonContentBody: balloonHtml,\n\t\t\t\t\thintContent: cafe.title,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ticonLayout: \"default#image\",\n\t\t\t\t\ticonImageHref: this._options.iconUrl,\n\t\t\t\t\ticonImageOffset: this._options.iconOffset,\n\t\t\t\t\ticonImageSize: this._options.iconSize,\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tthis._map.geoObjects.add(placemark);\n\t\t});\n\t},\n\n\trefresh() {\n\t\tthis._map.container.fitToViewport();\n\t},\n\n\tinit() {\n\t\t$(document).on(\n\t\t\t\"click\",\n\t\t\t\".popup-delivery__balloon__apply\",\n\t\t\tthis._handleBallonApply.bind(this)\n\t\t);\n\n\t\t$(window).on(\n\t\t\t\"resize\",\n\t\t\t$.debounce(250, this._handleWindowResize.bind(this))\n\t\t);\n\n\t\tthis._createMap();\n\t},\n};\n\nconst DeliveryMap = {\n\t_map: null,\n\n\t_options: {},\n\n\t_objectManager: null,\n\n\t_suggestView: null,\n\n\t_handleWindowResize() {\n\t\tthis.refresh();\n\t},\n\n\t_createMap() {\n\t\tconst baseOptions = $(\"#popup-delivery\").data(\"base-map-options\");\n\t\tconst deliveryOptions = $(\"#popup-delivery\").data(\n\t\t\t\"delivery-map-options\"\n\t\t);\n\t\tthis._options = Object.assign({}, baseOptions, deliveryOptions);\n\n\t\tthis._map = new ymaps.Map(\n\t\t\t\"popup-delivery__delivery-map\",\n\t\t\tthis._options\n\t\t);\n\n\t\tthis._objectManager = new ymaps.ObjectManager({\n\t\t\tclusterize: true,\n\t\t\tclusterHasBalloon: false,\n\t\t\tgeoObjectOpenBalloonOnClick: true,\n\t\t});\n\t\tthis._map.geoObjects.add(this._objectManager);\n\t},\n\n\t_createSuggestView() {\n\t\tthis._suggestView = new ymaps.SuggestView(\n\t\t\t\"popup-delivery__delivery-input\",\n\t\t\t{\n\t\t\t\tprovider: this._provider,\n\t\t\t}\n\t\t);\n\n\t\tthis._suggestView.events.add(\"select\", (e) => {\n\t\t\tconst address = e.get(\"item\");\n\n\t\t\tPopupDelivery.App.address = address.displayName;\n\n\t\t\tthis._objectManager.removeAll();\n\n\t\t\tthis._objectManager.add({\n\t\t\t\ttype: \"FeatureCollection\",\n\t\t\t\tfeatures: [\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: \"Feature\",\n\t\t\t\t\t\tid: address.id,\n\t\t\t\t\t\tgeometry: {\n\t\t\t\t\t\t\ttype: \"Point\",\n\t\t\t\t\t\t\tcoordinates: address.location,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\tballoonContentBody: address.displayName,\n\t\t\t\t\t\t\thintContent: address.displayName,\n\t\t\t\t\t\t},\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\tpreset: \"islands#icon\",\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t});\n\n\t\t\tthis._map.setCenter(address.location);\n\t\t});\n\t},\n\n\t_provider: {\n\t\tsuggest(searchText, options) {\n\t\t\tconst matches = PopupDelivery.App.loadedAddresses.filter(\n\t\t\t\t(address) => {\n\t\t\t\t\treturn (address.title + \"\")\n\t\t\t\t\t\t.toLowerCase()\n\t\t\t\t\t\t.includes(searchText.toLowerCase());\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tconst results = [];\n\n\t\t\tconst count = Math.min(options.results, matches.length);\n\n\t\t\tfor (var i = 0; i < count; i++) {\n\t\t\t\tresults.push({\n\t\t\t\t\tdisplayName: matches[i].title,\n\t\t\t\t\tvalue: matches[i].title,\n\t\t\t\t\tid: matches[i].id,\n\t\t\t\t\tlocation: matches[i].location,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn ymaps.vow.resolve(results);\n\t\t},\n\t},\n\n\trefresh() {\n\t\tthis._map.container.fitToViewport();\n\t},\n\n\tinit() {\n\t\t$(window).on(\n\t\t\t\"resize\",\n\t\t\t$.debounce(250, this._handleWindowResize.bind(this))\n\t\t);\n\n\t\tthis._createMap();\n\t\tthis._createSuggestView();\n\t},\n};\n\nconst PopupDelivery = {\n\tApp: null,\n\n\t_handleOutsideClick(e) {\n\t\tif (\n\t\t\tthis.App !== null &&\n\t\t\t$(e.target).closest(\".popup-delivery__input\").length === 0\n\t\t) {\n\t\t\tthis.App.closeCafesList();\n\t\t}\n\t},\n\n\topen() {\n\t\t$(\"#popup-delivery__caller\").trigger(\"click\");\n\t},\n\n\tclose() {\n\t\t$(\"#popup-delivery .popup-close\").trigger(\"click\");\n\t},\n\n\tinit() {\n\t\t$(document).on(\"click\", this._handleOutsideClick.bind(this));\n\n\t\ttry {\n\t\t\tshowPopup(\"#popup-delivery__caller\", \"#popup-delivery\");\n\t\t} catch (e) {\n\t\t\tconsole.log(e);\n\t\t}\n\n\t\tthis.App = new Vue({\n\t\t\tel: \"#popup-delivery\",\n\n\t\t\tdata() {\n\t\t\t\treturn {\n\t\t\t\t\tloadedCafes: [],\n\t\t\t\t\tloadedAddresses: [],\n\t\t\t\t\tselectedCafe: null,\n\t\t\t\t\taddress: \"\",\n\n\t\t\t\t\tcurrentTab: \"yourself\",\n\t\t\t\t\tisCafesListOpen: false,\n\t\t\t\t};\n\t\t\t},\n\n\t\t\tcreated() {\n\t\t\t\tthis.loadData();\n\n\t\t\t\tconst initial = JSON.parse($(\"#popup-delivery__state\").val());\n\n\t\t\t\tthis.currentTab = initial.currentTab;\n\n\t\t\t\tswitch (this.currentTab) {\n\t\t\t\t\tcase \"yourself\":\n\t\t\t\t\t\tthis.selectedCafe = initial.selectedCafe;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"delivery\":\n\t\t\t\t\t\tthis.address = initial.address;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tmethods: {\n\t\t\t\tloadData() {\n\t\t\t\t\tconst cafesUrl = $(\"#popup-delivery\").data(\"cafes-url\");\n\t\t\t\t\tconst addressesUrl =\n\t\t\t\t\t\t$(\"#popup-delivery\").data(\"addresses-url\");\n\n\t\t\t\t\t$.when($.getJSON(cafesUrl), $.getJSON(addressesUrl))\n\t\t\t\t\t\t.done((xhr1, xhr2) => {\n\t\t\t\t\t\t\tthis.loadedCafes = xhr1[0];\n\t\t\t\t\t\t\tthis.loadedAddresses = xhr2[0];\n\n\t\t\t\t\t\t\tymaps.ready(() => {\n\t\t\t\t\t\t\t\tCafesMap.init();\n\t\t\t\t\t\t\t\tCafesMap.addCafes(this.loadedCafes);\n\n\t\t\t\t\t\t\t\tDeliveryMap.init();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.fail((error) => {\n\t\t\t\t\t\t\tconsole.log(error);\n\t\t\t\t\t\t});\n\t\t\t\t},\n\n\t\t\t\tpickCafe(cafe) {\n\t\t\t\t\tthis.selectedCafe = cafe;\n\t\t\t\t\tthis.closeCafesList();\n\t\t\t\t},\n\n\t\t\t\tpickCafeById(id) {\n\t\t\t\t\tthis.pickCafe(\n\t\t\t\t\t\tthis.loadedCafes.find((cafe) => {\n\t\t\t\t\t\t\treturn cafe.id == id;\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t},\n\n\t\t\t\tdepickCafe() {\n\t\t\t\t\tthis.selectedCafe = null;\n\t\t\t\t\tthis.closeCafesList();\n\t\t\t\t},\n\n\t\t\t\topenCafesList() {\n\t\t\t\t\tthis.isCafesListOpen = true;\n\t\t\t\t},\n\n\t\t\t\tcloseCafesList() {\n\t\t\t\t\tthis.isCafesListOpen = false;\n\t\t\t\t},\n\n\t\t\t\tsaveAndClose() {\n\t\t\t\t\tconst state = JSON.stringify({\n\t\t\t\t\t\tcurrentTab: this.currentTab,\n\t\t\t\t\t\tselectedCafe: Object.assign(\n\t\t\t\t\t\t\t{},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: this.selectedCafe.id,\n\t\t\t\t\t\t\t\ttitle: this.selectedCafe.title,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t),\n\t\t\t\t\t\taddress: this.address,\n\t\t\t\t\t});\n\n\t\t\t\t\t$(\"#popup-delivery__state\").val(state);\n\n\t\t\t\t\tconst onsaved = $(\"#popup-delivery\").data(\"onsaved\");\n\t\t\t\t\tif (typeof window[onsaved] === \"function\") {\n\t\t\t\t\t\twindow[onsaved](state);\n\t\t\t\t\t}\n\n\t\t\t\t\tPopupDelivery.close();\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t},\n};\n\nif ($(\"#popup-delivery\").length) {\n\tPopupDelivery.init();\n\tPopupDelivery.open();\n}\nwindow.CafesMap = CafesMap;\nwindow.DeliveryMap = DeliveryMap;\nwindow.PopupDelivery = PopupDelivery;\n\nexport default PopupDelivery;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import \"./modules/PopupDelivery\";\n"],"names":["CafesMap","_map","_options","_handleWindowResize","refresh","_handleBallonApply","e","cafeId","$","currentTarget","data","PopupDelivery","App","pickCafeById","balloon","close","_createMap","baseOptions","cafeOptions","Object","assign","ymaps","Map","addCafes","cafes","forEach","cafe","balloonHtml","content","append","id","html","placemark","Placemark","location","balloonContentBody","hintContent","title","iconLayout","iconImageHref","iconUrl","iconImageOffset","iconOffset","iconImageSize","iconSize","geoObjects","add","container","fitToViewport","init","document","on","bind","window","debounce","DeliveryMap","_objectManager","_suggestView","deliveryOptions","ObjectManager","clusterize","clusterHasBalloon","geoObjectOpenBalloonOnClick","_createSuggestView","SuggestView","provider","_provider","events","address","get","displayName","removeAll","type","features","geometry","coordinates","properties","options","preset","setCenter","suggest","searchText","matches","loadedAddresses","filter","toLowerCase","includes","results","count","Math","min","length","i","push","value","vow","resolve","_handleOutsideClick","target","closest","closeCafesList","open","trigger","showPopup","console","log","Vue","el","loadedCafes","selectedCafe","currentTab","isCafesListOpen","created","loadData","initial","JSON","parse","val","methods","cafesUrl","addressesUrl","when","getJSON","done","xhr1","xhr2","ready","fail","error","pickCafe","find","depickCafe","openCafesList","saveAndClose","state","stringify","onsaved"],"sourceRoot":""}